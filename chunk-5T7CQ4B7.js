import{a as v}from"./chunk-BN6YPLPF.js";import{d as s}from"./chunk-XK53KQBE.js";import{a as u}from"./chunk-3WG2WLZ4.js";var l=class extends v{constructor(a){if(super(a),!a.variable&&!a.variables)throw new Error("FlowGraphSetVariableBlock: variable/variables is not defined");if(a.variables&&a.variable)throw new Error("FlowGraphSetVariableBlock: variable and variables are both defined");if(a.variables)for(let i of a.variables)this.registerDataInput(i,s);else this.registerDataInput("value",s)}_execute(a,i){if(this.config?.variables)for(let r of this.config.variables)this._saveVariable(a,r);else this._saveVariable(a,this.config?.variable,"value");this.out._activateSignal(a)}_saveVariable(a,i,r){let e=a._getGlobalContextVariable("currentlyRunningAnimationGroups",[]);for(let n of e){let o=a.assetsContext.animationGroups[n];for(let t of o.targetedAnimations)if(t.target===a&&t.target===a&&t.animation.targetProperty===i){o.stop();let b=e.indexOf(n);b>-1&&e.splice(b,1),a._setGlobalContextVariable("currentlyRunningAnimationGroups",e);break}}let f=this.getDataInput(r||i)?.getValue(a);a.setVariable(i,f)}getClassName(){return"FlowGraphSetVariableBlock"}serialize(a){super.serialize(a),a.config.variable=this.config?.variable}};u("FlowGraphSetVariableBlock",l);export{l as a};
